<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Общие справки аналитики</title>
    <link rel="stylesheet" href="../assest/CSS/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- 
        Шапка
    -->
    <header class="header">
        <nav class="menu">
            <ul>
                <div class="block">
                    <img src="../assest/img/logo.png" title="Dashboard">
                    <li class="text_dash"><a href="../index.html">Dashboard</a></li>
                </div>
                <div class="block">
                    <img src="../assest/img/icons/icon-main.png" title="Главная страница">
                    <li><a href="../index.html">Главная</a></li>
                </div>
                <div class="block" id="drop_hidden">
                    <img src="../assest/img/icons/icon-certif.png" title="Справки">
                    <li>
                        <a href="">Справка</a>
                        <ul class="drop">
                            <li><a href="MainCertificate_page.html" class="dropdown">Общие справки</a></li>
                            <li><a href="CerificateCategories_vehicles.html" class="dropdown">Справки по транспорту</a></li>
                            <li><a href="CertificateCategory_page.html" class="dropdown">Справки по неисправностям</a></li>
                        </ul>
                    </li>
                </div>
                <div class="block">
                    <img src="../assest/img/icons/icon-graphics.png" title="Графики">
                    <li><a href="">Графика</a></li>
                </div>
                <div class="block" id="drop_hidden_two">
                    <img src="../assest/img/icons/icon-categoryes.png" title="Категории">
                    <li>
                        <a href="">Категории</a>
                        <ul class="drop_two">
                            <li><a href="Category-one_page.html" class="dropdown">Первая категория</a></li>
                            <li><a href="" class="dropdown">Вторая категория</a></li>
                        </ul>
                    </li>
                </div>
            </ul>
        </nav>
        <label id="menu_btn" class="menu-toggle">
            <h2>Dashboard</h2>
            <span></span>
        </label>
        <div class="heads">
            <button class="btn__filtr">Фильтрация</button>
            <img src="../assest/img/icons/icon-notificate.png" alt="">
            <div class="circle"><span class="name_user">A</span></div>
        </div>
    </header>

    <!-- 
        Основной раздел
    -->
    <section class="main">
        <div class="container">
            <h1 class="title_text text2">Общая справка по всем категориям</h1>

            <div class="graphics">
                <!-- Начало первого графика -->
                <div class="graphic_gist">
                    <h2 class="graph_title tit2">Количество отказов техники в эксплуатации</h2>

                    <div id="circleContainer">
                        <canvas id="myCircle" width="500" height="423"></canvas>
                    </div>
                </div>
                <!-- Конец первого графика -->

                <div class="graphic_gist">
                    <h2 class="graph_title">Распределение гарантийных уведомленийпо классам техники</h2>

                    <div id="circleContainer">
                        <canvas id="myCircle2" width="500" height="423"></canvas>
                    </div>
                </div>

                <div class="graphic_gist">
                    <h2 class="graph_title">Не вошло в расчёты</h2>

                    <div id="circleContainer">
                        <canvas id="myCircle3" width="500" height="423"></canvas>
                    </div>
                </div>

                <div class="graphic_gist">
                    <h2 class="graph_title">Количество отказов техники в эксплуатации</h2>

                    <div id="gistContainer">
                        <canvas id="myGistogram" width="590" height="370"></canvas>
                    </div>
                </div>

                <div class="graphic_gist">
                    <h2 class="graph_title">Количество и уровень уведомлений об отказе/акцептов (за предыдущие 12 месяцев)</h2>

                    <div id="gistContainer">
                        <canvas id="myGistogram2" width="590" height="370"></canvas>
                    </div>
                </div>
            </div>

            <div class="graps">
                <div class="graphic_gist grap">
                    <h2 class="graph_title">Уровень уведомления об отказе/акцептов (помесячно)</h2>

                    <div id="gistContainer">
                        <canvas id="myGistogram3" width="590" height="370"></canvas>
                    </div>
                </div>
            </div>


        </div>
    </section>

    <script src="../assest/JS/scrpit.js"></script>
    <script>
        // Первая гистограмма
        const ctx = document.getElementById('myCircle').getContext('2d');
        Chart.defaults.color = "black";
        let Circle = {
            labels: ['Устранённые отказы', 'Неустранённые отказы', 'Негарантированные отказы'],
            datasets: [{
                data: [59, 40, 3],
                backgroundColor: [
                    '#691B1B',
                    '#1770C2',
                    '#F3B411'
                ],
            }]
        };
        let pieCircle = new Chart(ctx, {
            type: 'pie',
            data: Circle,
            options: {
                plugins: {
                    legend: {
                        display: true,
                        position: "bottom",
                        labels: {
                            boxWidth: 50,
                            color: "black",
                            font: {
                                size: 17,
                            }
                        }
                    },
                }
            },
        });

        // Вторая гистограмма
        const ctxTwo = document.getElementById('myCircle2').getContext('2d');
        let CircleTwo = {
            labels: ['Тяжёлая техника', 'Лёгкая техника', 'Трубоулкадчики', 'Cредняя техника', 'Колёсная техника'],
            datasets: [{
                data: [55.1, 20.6, 14.7, 5.15, 4.41],
                backgroundColor: [
                    '#691B1B',
                    '#ECFF15',
                    '#904712',
                    '#69BC00',
                    '#1770C2'
                ],
            }]
        };
        let pieCircleTwo = new Chart(ctxTwo, {
            type: 'pie',
            data: CircleTwo,
            options: {
                plugins: {
                    legend: {
                        display: true,
                        position: "bottom",
                        labels: {
                            boxWidth: 50,
                            color: "black",
                            font: {
                                size: 16,
                            }
                        }
                    },
                }
            },
        });

        // Третья гистограмма
        const ctxFree = document.getElementById('myCircle3').getContext('2d');
        let CircleFree = {
            labels: ['Дополнительное оборудование', 'Гарантия ЧЕТРА', 'ППР'],
            datasets: [{
                data: [50, 37.5, 12.5],
                backgroundColor: [
                    '#F3B411',
                    '#FFFF00',
                    '#1770C2',
                ],
            }]
        };
        let pieCircleFree = new Chart(ctxFree, {
            type: 'pie',
            data: CircleFree,
            options: {
                plugins: {
                    legend: {
                        display: true,
                        position: "bottom",
                        labels: {
                            boxWidth: 50,
                            color: "black",
                            font: {
                                size: 16,
                            }
                        }
                    },
                }
            },
        });

        // Первая столбчатая диаграмма
        const ctxFour = document.getElementById('myGistogram').getContext('2d');
        Chart.defaults.color = "black";
        const myChart = new Chart(ctxFour, {
            data: {
                labels: ['2022', '2023', '2024'],
                datasets: [{
                    label: 'Неустранённые заказы',
                    type: "bar",
                    backgroundColor: '#F3B411',
                    data: [54, 41, 62],
                    yAxisID: 'y',
                }, {
                    label: 'Устранённые заказы',
                    type: "bar",
                    data: [41, 57, 74],
                    backgroundColor: '#47243B',
                }, {
                    label: 'Негарантированные заказы',
                    type: "bar",
                    data: [10, 8, 4],
                    backgroundColor: '#808080',
                }],
            },

            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        // beginAtZero: true,
                        min: 0,
                        max: 100,
                        stacked: true,
                        ticks: {
                            stepSize: 50
                        },
                    },

                    x: {
                        stacked: true,
                    }
                },

                plugins: {
                    legend: {
                        display: true,
                        position: "bottom",
                        labels: {
                            boxWidth: 50,
                            color: "black",
                            font: {
                                size: 14,
                            }
                        }
                    },
                }
            }
        });

        // Вторая столбчатая диаграмма (ОГРОМНАЯ)
        const ctxFive = document.getElementById('myGistogram2').getContext('2d');
        Chart.defaults.color = "black";
        const myGistogram2 = new Chart(ctxFive, {
            data: {
                labels: ['Янв.23', 'Фев.23', 'Мар.23', 'Апр.23', 'Май.23', 'Июн.23', 'Июл.23', 'Авг.23', 'Сен.23', 'Окт.23', 'Ноя.23', 'Дек.23', 'Янв.24'],
                datasets: [{
                    label: 'Уровень принятых отказов по АР до 500 мото-часов (за пред 12 мес.)',
                    type: "line",
                    backgroundColor: '#FFF',
                    borderColor: "#800080",
                    data: [0.61, 0.63, 0.61, 0.59, 0.61, 0.62, 0.59, 0.54, 0.53, 0.52, 0.52, 0.51, 0.42],
                    yAxisID: 'y1',
                }, {
                    label: 'Уровень уведомлений об отказе до 500 мото-часов, принятых в раб. (за пред 12 мес.)',
                    type: "line",
                    backgroundColor: '#FFF',
                    borderColor: "#CA3232",
                    data: [0.87, 0.88, 0.87, 0.87, 0.91, 0.92, 0.93, 0.90, 0.89, 0.87, 0.88, 0.86, 0.77],
                    yAxisID: 'y1',
                }, {
                    label: 'Уровень принятых отказов по АР (за пред 12 мес.)',
                    type: "line",
                    backgroundColor: '#FFF',
                    borderColor: "#008000",
                    data: [2.01, 2.09, 2.05, 2.06, 2.08, 2.10, 2.10, 2.00, 2.03, 2.11, 2.13, 2.13, 1.80],
                    yAxisID: 'y1',
                }, {
                    label: 'Уровень уведомлений об отказе,принятых в раб. (за пред 12 мес.)',
                    type: "line",
                    backgroundColor: '#FFF',
                    borderColor: "#984591",
                    data: [2.80, 2.83, 2.87, 2.94, 3.05, 3.08, 3.15, 3.08, 3.16, 3.20, 3.23, 3.23, 2.87],
                    yAxisID: 'y1',
                }, {
                    label: 'Количество уведомлений об отказе, принятых в работу, шт. (за пред 12 мес.)',
                    type: "bar",
                    backgroundColor: '#F3B411',
                    data: [1768, 1833, 1908, 2003, 2136, 2226, 2343, 2362, 2505, 2620, 2718, 2791, 2771],
                    yAxisID: 'y',
                }],
            },

            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        // beginAtZero: true,
                        min: 0,
                        max: 3000,
                        ticks: {
                            stepSize: 500
                        },
                    },
                    y1: {
                        position: 'right',
                        min: 0,
                        max: 3.5,
                        ticks: {
                            stepSize: 0.5
                        },
                    }
                },

                plugins: {
                    legend: {
                        display: true,
                        position: "bottom",
                        labels: {
                            boxWidth: 50,
                            color: "black",
                            font: {
                                size: 14,
                            }
                        }
                    },
                }
            }
        });

        // Третья столбчатая диаграмма (ОГРОМНАЯ)
        const ctxSix = document.getElementById('myGistogram3').getContext('2d');
        Chart.defaults.color = "black";
        const myGistogram3 = new Chart(ctxSix, {
            data: {
                labels: ['Янв.23', 'Фев.23', 'Мар.23', 'Апр.23', 'Май.23', 'Июн.23', 'Июл.23', 'Авг.23', 'Сен.23', 'Окт.23', 'Ноя.23', 'Дек.23', 'Янв.24'],
                datasets: [{
                    label: 'Уровень уведомлений об отказе до 500 мото-часов, принятых в работу',
                    type: "line",
                    backgroundColor: '#FFF',
                    borderColor: "#FF0000",
                    data: [0.06, 0.07, 0.10, 0.06, 0.11, 0.09, 0.11, 0.10, 0.09, 0.08, 0.08, 0.05, 0.04],
                    yAxisID: 'y1',
                }, {
                    label: 'Уровень принятых отказов по АР',
                    type: "line",
                    backgroundColor: '#FFF',
                    borderColor: "#008000",
                    data: [0.17, 0.19, 0.16, 0.16, 0.16, 0.22, 0.20, 0.18, 0.26, 0.32, 0.21, 0.21, 0],
                    yAxisID: 'y1',
                }, {
                    label: 'Уровень уведомлений об отказе, принятых в работу',
                    type: "line",
                    backgroundColor: '#FFF',
                    borderColor: "#984591",
                    data: [0.19, 0.24, 0.34, 0.33, 0.38, 0.30, 0.36, 0.29, 0.39, 0.34, 0.30, 0.27, 0.10],
                    yAxisID: 'y1',
                }, {
                    label: 'Количество уведомлений об отказе, принятых в работу, шт. (за пред 12 мес.)',
                    type: "bar",
                    backgroundColor: '#F3B411',
                    data: [119, 157, 229, 227, 264, 218, 271, 223, 311, 281, 256, 235, 99],
                    yAxisID: 'y',
                }],
            },

            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        // beginAtZero: true,
                        min: 0,
                        max: 400,
                        ticks: {
                            stepSize: 100
                        },
                    },
                    y1: {
                        position: 'right',
                        min: 0,
                        max: 0.5,
                        ticks: {
                            stepSize: 0.1
                        },
                    }
                },

                plugins: {
                    legend: {
                        display: true,
                        position: "bottom",
                        labels: {
                            boxWidth: 50,
                            color: "black",
                            font: {
                                size: 14,
                            }
                        }
                    },
                }
            }
        });
    </script>
</body>
</html>